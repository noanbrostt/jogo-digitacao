<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>

    <!-- Fontes e Estilos Básicos -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Incluindo Font Awesome para os ícones de olho (SVGs já estão inline, mas esta linha é comum para outros ícones) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
        crossorigin="anonymous" />
    <!-- Incluindo Bootstrap CSS para o Modal -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
        crossorigin="anonymous">

    <link rel="stylesheet" href="./css/style.css">

    <style>
        /* Definindo variáveis CSS para cores (exemplo de valores) */
        :root {
            --bg-orange: #ff4b2b;
            --bg-blue: #322589;
            --contrast-secondary: #ffffff;
            --contrast-primary: #333333;
        }

        html,
        body {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
            font-family: 'Inter', sans-serif;
            /* Aplicando a fonte globalmente */
        }

        body {
            height: calc(var(--vh, 1vh) * 100);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            background: linear-gradient(191.42deg, var(--bg-orange) 5.12%, var(--bg-blue) 107.11%);
        }

        #conteudo {
            display: grid;
        }

        #logo {
            width: 166px;
            position: absolute;
            top: 0px;
            justify-self: center;
            display: flex;
            align-items: center;
        }

        #logo img:first-child {
            width: 50px;
            height: 50px;
            margin-right: -30px;
            margin-top: -10px;
        }

        #logo img {
            width: 100%;
        }

        .container {
            background-color: #ffffff;
            border-radius: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.35);
            position: relative;
            overflow: hidden;
            width: 768px;
            max-width: 98%;
            min-height: 480px;
            margin-inline: auto;
        }

        .container p {
            font-size: 14px;
            line-height: 20px;
            letter-spacing: 0.3px;
            margin: 20px 0;
        }

        .container span {
            font-size: 12px;
        }

        .container a {
            color: var(--contrast-primary);
            /* Alterado para contraste-primary para melhor visibilidade */
            font-size: 13px;
            text-decoration: none;
            margin: 15px 0 10px;
        }

        .container button {
            color: var(--contrast-secondary);
            /* Cor do texto no botão */
            background-color: var(--bg-blue);
            /* Fundo do botão, um dos gradientes */
            border: 1px solid transparent;
            /* Borda transparente inicialmente */
            font-size: 12px;
            padding: 10px 45px;
            border-radius: 8px;
            font-weight: 600;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            margin-top: 10px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            /* Transição para o hover */
        }

        .container button:hover {
            background-color: #4e40ad;
            /* Um tom um pouco mais escuro para o hover */
        }


        .container .form {
            color: var(--contrast-primary);
            /* Cor do texto no formulário */
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            padding: 0 190px;
            margin-inline: -150px;
            height: 100%;
        }

        .container .form h1 {
            color: var(--bg-blue);
            font-weight: bold;
            margin-bottom: 15px;
        }

        .container input {
            background-color: #eee;
            /* border: none; */
            margin: 8px 0;
            padding: 10px 15px;
            font-size: 13px;
            border-radius: 8px;
            width: 100%;
            outline: none;
        }

        .container.active .sign-in {
            transform: translateX(100%);
            opacity: 0;
        }

        .container.active .sign-up {
            transform: translateX(100%);
            opacity: 1;
            z-index: 5;
            animation: move 0.6s;
        }

        .form-container {
            position: absolute;
            top: 0;
            height: 100%;
            transition: all 0.6s ease-in-out;
        }

        .sign-in {
            left: 0;
            width: 50%;
            z-index: 2;
        }

        .sign-up {
            left: 0;
            width: 50%;
            opacity: 0;
            z-index: 1;
        }

        @keyframes move {

            0%,
            49.99% {
                opacity: 0;
                z-index: 1;
            }

            50%,
            100% {
                opacity: 1;
                z-index: 5;
            }
        }

        .toggle-container {
            position: absolute;
            top: 0;
            left: 50%;
            width: 50%;
            height: 100%;
            overflow: hidden;
            transition: all 0.6s ease-in-out;
            border-radius: 150px 0 0 100px;
            z-index: 10;
        }

        .toggle-container button {
            border: 1px solid var(--contrast-secondary);
            /* Borda branca para os botões do toggle */
            background-color: transparent;
            /* Fundo transparente */
            color: var(--contrast-secondary);
            /* Texto branco */
        }

        .container.active .toggle-container {
            transform: translateX(-100%);
            border-radius: 0 150px 100px 0;
        }

        .toggle {
            background-color: var(--bg-blue);
            color: var(--contrast-secondary);
            height: 100%;
            position: relative;
            left: -100%;
            width: 200%;
            transform: translateX(0);
            transition: all 0.6s ease-in-out;
        }

        .container.active .toggle {
            transform: translateX(50%);
        }

        .toggle-panel {
            position: absolute;
            width: 50%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            padding: 0 30px;
            text-align: center;
            transform: translateX(0);
            transition: all 0.6s ease-in-out;
        }

        .toggle-panel h1 {
            font-weight: bold;
            margin-bottom: 0px;
        }

        .toggle-left {
            transform: translateX(-200%);
        }

        .container.active .toggle-left {
            transform: translateX(0);
        }

        .toggle-right {
            right: 0;
            transform: translateX(0);
        }

        .container.active .toggle-right {
            transform: translateX(200%);
        }

        .toggle-password {
            position: relative;
            top: -37px;
            right: 10px;
            font-size: 17px;
            color: var(--bg-blue);
            cursor: pointer;
            align-self: self-end;
        }

        .esqueceu {
            color: var(--contrast-primary);
        }

        .d-contents {
            /* Adicionado para envolver inputs e ícones de olho */
            display: contents;
            /* Isso faz com que os filhos apareçam como se fossem filhos do pai */
        }

        /* Responsive */
        @media only screen and (max-width: 600px) {
            #logo {
                top: -25px;
            }

            .container {
                margin-top: 20px;
            }

            .container button {
                padding: 6px 15px;
            }

            .container .form-container.sign-in,
            .container .form-container.sign-up {
                top: 6%;
                width: 100%;
            }

            .toggle-container {
                left: 0;
                width: 100%;
                height: 20%;
                border-radius: 0px 0px 50px 50px;
                transform: translateY(-1%);
            }

            .toggle-container .toggle-panel {
                flex-direction: row;
                flex-wrap: wrap;
                gap: 10px;
                padding-block: 10px;
            }

            .toggle-container .toggle-panel h1 {
                font-size: 20px;
            }

            .toggle-container .toggle-panel p {
                display: none;
            }

            .toggle-container .toggle-panel button {
                margin-top: 0px;
            }

            .toggle-container .toggle-left {
                transform: translateX(100%) translateY(200%);
            }

            .toggle-container .toggle-right {
                transform: translateX(0%) translateY(0%);
            }

            .container.active .sign-in {
                top: -6%;
                transform: translateY(-0%);
            }

            .container.active .sign-up {
                top: -6%;
                transform: translateY(0%);
            }

            .container.active .toggle-container {
                transform: translateY(401%);
                border-radius: 50px 50px 0px 0px;
                bottom: 0;
            }

            .container.active .toggle-container .toggle-left {
                transform: translateY(0%);
            }

            .container.active .toggle-container .toggle-right {
                transform: translateX(-100%) translateY(-200%);
            }
        }
    </style>
</head>

<body>

    <!-- Conteúdo do layout 'main' seria injetado aqui. Assumindo que este é o corpo principal. -->

    <div id="logo">
        <!-- <img src="/img/logo-plansul.png" alt="Logo" />
        <img src="/img/logo-tinder-white.png" alt="Logo" /> -->
    </div>

    <div class="container" id="container">
        <div class="form-container sign-up">
            <div class="form" id="registerForm">
                <!-- Adicionado form tag e ID para o formulário de registro -->
                <h1>Criar Senha</h1>
                <input type="text" placeholder="Matrícula Plansul" class="input_matricula" required />
                <input type="text" placeholder="CPF" class="input_cpf" required />
                <span class="d-contents">
                    <input type="password" class="password" placeholder="Nova Senha" required />
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" width="20" height="20"
                        fill="currentColor" class="fa-eye toggle-password">
                        <path
                            d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z" />
                    </svg>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" width="20" height="20"
                        fill="currentColor" class="fa-eye-slash toggle-password" style="display: none;">
                        <path
                            d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c8.4-19.3 10.6-41.4 4.8-63.3c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zM373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5L373 389.9z" />
                    </svg>
                </span>
                <button type="submit" id="register_form_btn">
                    <!-- Alterado ID para evitar conflito com div class -->
                    Criar Senha
                </button>
            </div>
        </div>
        <div class="form-container sign-in">
            <div class="form" id="loginForm">
                <!-- Adicionado form tag e ID para o formulário de login -->
                <h1>Entrar</h1>
                <input type="text" placeholder="Matrícula Plansul" class="input_matricula" autofocus required />
                <span class="d-contents">
                    <input type="password" class="password" placeholder="Senha do Paco" required />
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" width="20" height="20"
                        fill="currentColor" class="fa-eye toggle-password">
                        <path
                            d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z" />
                    </svg>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" width="20" height="20"
                        fill="currentColor" class="fa-eye-slash toggle-password" style="display: none;">
                        <path
                            d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c8.4-19.3 10.6-41.4 4.8-63.3c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zM373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5L373 389.9z" />
                    </svg>
                </span>
                <span class="c-pointer esqueceu" data-toggle="modal" data-target="#exampleModalCenter">Esqueceu sua
                    senha?</span>
                <button type="submit" id="login_form_btn">
                    <!-- Alterado ID para evitar conflito com div class -->
                    Entrar
                </button>
            </div>
        </div>
        <div class="toggle-container">
            <div class="toggle">
                <div class="toggle-panel toggle-left">
                    <h1>Já Tem Senha?</h1>
                    <p>Insira sua matrícula e senha</p>
                    <button id="login_toggle_btn">
                        <!-- Alterado ID para evitar conflito com div class -->
                        Entrar
                    </button>
                </div>
                <div class="toggle-panel toggle-right">
                    <h1>Sem Senha?</h1>
                    <p>Crie uma senha para entrar</p>
                    <button id="register_toggle_btn">
                        <!-- Alterado ID para evitar conflito com div class -->
                        Criar Senha
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Esqueci Minha Senha -->
    <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog"
        aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">
                        Recuperação de senha
                    </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>
                        Caso seja seu primeiro acesso ou tenha esquecido sua senha,
                        clique em "Criar Senha" e crie uma nova senha.
                    </p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">
                        Fechar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts JavaScript -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" crossorigin="anonymous"></script>
    <!-- Bootstrap Bundle com Popper.js (necessário para o modal) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"
        xintegrity="sha384-HwwvtgBNo3bKMpLYS8iLEpwsjC8fXyP/rTRMrvL6NfQ3V5yA7Q2a2FfR7R3T8V2k" crossorigin="anonymous">
    </script>
    <!-- jQuery Mask Plugin -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"
        xintegrity="sha512-pHVGpX7FjB7Y8jJb4m5L5g5g5w5w5w5w5w5w5w5w5w5w5w5w5w5w5w5w5w5w5w5w5w5w5w5w5w=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script>
        // Definição da função Toast para SweetAlert2 (assumindo que é um mixin)
        const Toast = Swal.mixin({
            toast: true,
            position: 'top-end',
            showConfirmButton: false,
            timer: 3000,
            timerProgressBar: true,
            didOpen: (toast) => {
                toast.addEventListener('mouseenter', Swal.stopTimer);
                toast.addEventListener('mouseleave', Swal.resumeTimer);
            }
        });

        function validarCampos(campos) {
            return new Promise((resolve) => {
                let erros = [];

                // Resetar erros anteriores
                campos.forEach((campo) => {
                    campo.element.removeClass("input-error");
                });

                setTimeout(() => {
                    campos.forEach((campo) => {
                        let valor = "";

                        if (campo.type === "custom") {
                            if (!campo.isValid) {
                                erros.push(campo.message);
                                campo.element.addClass("input-error");
                            }
                            return;
                        }

                        if (
                            campo.element.is("input") ||
                            campo.element.is("textarea") ||
                            campo.element.is("select")
                        ) {
                            valor = campo.element.val().trim();
                        }

                        const minLength = campo.minLength || 1;

                        if (valor.length < minLength) {
                            erros.push(campo.message);
                            campo.element.addClass("input-error");
                        }
                    });

                    if (erros.length > 0) {
                        erros.forEach((erro, index) => {
                            console.log(erro);
                            setTimeout(() => {
                                Toast.fire({
                                    icon: "error",
                                    title: erro,
                                });
                            }, index * 600);
                        });
                        return resolve(false);
                    }

                    resolve(true);
                }, 0);
            });
        }

        // Isso ajusta a altura da viewport real do device
        function setViewportHeight() {
            let vh = window.innerHeight * 0.01;
            document.documentElement.style.setProperty('--vh', `${vh}px`);
        }
        window.addEventListener('resize', setViewportHeight);
        window.addEventListener('orientationchange', setViewportHeight);
        setViewportHeight();

        // Animação tela de login/register
        $("#register_toggle_btn").on("click", function () { // Atualizado ID
            $("#container").addClass("active");
        });

        $("#login_toggle_btn").on("click", function () { // Atualizado ID
            $("#container").removeClass("active");
        });
        //

        // Show password eye
        $(".toggle-password").on("click", function () {
            const inputPass = $(this).closest('span').find(".password");
            const eyeIcon = $(this).closest('span').find(".fa-eye");
            const eyeSlashIcon = $(this).closest('span').find(".fa-eye-slash");

            if (inputPass.attr("type") === "password") {
                inputPass.attr("type", "text");
                eyeIcon.hide();
                eyeSlashIcon.show();
            } else {
                inputPass.attr("type", "password");
                eyeSlashIcon.hide();
                eyeIcon.show();
            }
        });
        //

        // Input Masks
        $(".input_matricula").mask("000000");
        $(".input_cpf").mask("000.000.000-00");
        //

        $("#login_form_btn").on("click", function (e) {
            e.preventDefault();

            let matricula = $(".sign-in .input_matricula");
            let senha = $(".sign-in .password");

            const campos = [{
                    element: matricula,
                    minLength: 6,
                    message: "A matrícula deve ter 6 números.",
                },
                {
                    element: senha,
                    minLength: 1,
                    message: "A senha está vazia.",
                },
            ];

            validarCampos(campos).then(valido => {
                if (valido) {
                    // ✅ Dados válidos - pode enviar via AJAX
                    $.ajax({
                        url: "/api/login",
                        type: "POST",
                        contentType: 'application/json',
                        data: JSON.stringify({
                            matricula: matricula.val().trim(),
                            senha: senha.val().trim(),
                        }),
                        beforeSend: function () {
                            Swal.fire({
                                title: 'Aguarde...',
                                text: 'Verificando seus dados',
                                allowOutsideClick: false,
                                didOpen: () => {
                                    Swal.showLoading();
                                }
                            });
                        },
                        success: function (response) {
                            // Redireciona normalmente
                            window.location.href = "/";
                        },
                        error: function (error) {
                            Swal.close();

                            var erro = error.responseJSON.message;
                            
                            if (erro == 'Senha incorreta.') {
                                senha.addClass("input-error");
                            } else {
                                erro = 'Matrícula não encontrada, favor cadastrar-se em "Criar Senha".';
                                matricula.addClass("input-error");
                            }

                            Toast.fire({
                                icon: "error",
                                title: erro,
                            });
                        },
                    });
                }
            });
        });

        $("#register_form_btn").on("click", function (e) {
            let matricula = $(".sign-up .input_matricula");
            let cpf = $(".sign-up .input_cpf");
            let senha = $(".sign-up .password");

            const campos = [{
                    element: matricula,
                    minLength: 6,
                    message: "A matrícula deve ter 6 números.",
                },
                {
                    element: cpf,
                    minLength: 14, // Máscara aplicada no CPF
                    message: "O CPF deve ter 11 números.",
                },
                {
                    element: senha,
                    minLength: 1,
                    message: "A senha está vazia.",
                },
            ];

            validarCampos(campos).then(valido => {
                if (valido) {
                    // ✅ Dados válidos - pode enviar via AJAX
                    $.ajax({
                        url: "/api/register-password",
                        type: "POST",
                        data: {
                            matricula: matricula.val().trim(),
                            cpf: cpf.val().replace(/\D/g, '').trim(),
                            nova_senha: senha.val().trim(),
                        },
                        beforeSend: function () {
                            Swal.fire({
                                title: 'Aguarde...',
                                text: 'Verificando seus dados',
                                allowOutsideClick: false,
                                didOpen: () => {
                                    Swal.showLoading();
                                }
                            });
                        },
                        success: function (response) {
                            // Redireciona para a página de inscrição
                            window.location.href = response.redirect;
                        },
                        error: function (error) {
                            Swal.close();

                            var erro = error.responseJSON.error;

                            if (erro == 'CPF não encontrado.') {
                                cpf.addClass("input-error");
                            }

                            Toast.fire({
                                icon: "error",
                                title: erro,
                            });

                        },
                    });
                }
            });
        });

        $(".sign-in input, .sign-up input").on("keydown", function (e) {
            if (e.key === "Enter") {
                e.preventDefault();

                const container = $(this).closest(".form"); // Encontra o container do formulário atual
                const inputs = container.find("input"); // Todos os inputs desse container
                const index = inputs.index(this); // Pega o índice do input atual

                if (index === inputs.length - 1) {
                    // Último input → clica no botão desse container
                    container.find("button[type='submit']").click(); // Clica no botão de submit
                } else {
                    // Foca no próximo input
                    inputs.eq(index + 1).focus();
                }
            }
        });

        // 🔧 Remover borda de erro ao começar a digitar/selecionar
        $(document).on("input change", ".input-error", function () {
            $(this).removeClass("input-error");
        });
    </script>

</body>

</html>